# カフェ訪問記録PWA プロジェクト計画

## プロジェクト概要
- **フェーズ**: 4フェーズ
- **優先度**: UX/UI > 機能実装 > パフォーマンス
- **現在のステータス**: Phase 1完了、Phase 2（地図機能実装）開始

## 開発フェーズ

### Phase 1: 基盤構築 ✅ 完了
**目標**: プロジェクトの基本構造とデータモデルの確立

#### タスク
1. **プロジェクト初期設定**
   - [x] PWA設定（@angular/pwa追加）
   - [x] 必要なパッケージインストール（Dexie.js等）
   - [x] 環境変数設定（Google Maps APIキー）
   
2. **データモデル設計**
   - [x] Cafeインターフェース定義
   - [x] IndexedDBスキーマ設計
   - [x] Dexie.jsセットアップ

3. **基本サービス実装**
   - [x] CafeStorageService（CRUD操作）
   - [x] GeocodingService（住所→座標変換）
   - [x] NetworkService（オンライン/オフライン検知）

4. **ルーティング設計**
   - [x] 基本ルート設定
   - [x] 遅延読み込み設定

### Phase 2: 地図機能実装
**目標**: SVG地図でのカフェ表示とGoogle Maps風操作

#### タスク
1. **SVG地図基盤**
   - [x] 日本地図SVGデータ準備
   - [x] 地図表示コンポーネント
   - [x] 座標変換ロジック（緯度経度→SVG座標）

2. **インタラクション**
   - [x] パン（ドラッグ）操作
   - [x] ズーム（ホイール/ピンチ）操作
   - [x] マーカークリックイベント
   - [x] ポップアップ表示

3. **パフォーマンス最適化**
   - [ ] マーカークラスタリング
   - [ ] 仮想ビューポート実装
   - [ ] アニメーション最適化

4. **レスポンシブ対応**
   - [x] モバイル用タッチ操作
   - [x] 画面サイズ対応

### Phase 3: コア機能実装
**目標**: カフェ登録・管理機能の完成

#### タスク
1. **カフェ登録機能**
   - [ ] カフェ登録フォームコンポーネント
   - [ ] 住所入力→座標変換
   - [ ] バリデーション実装
   - [ ] 登録完了通知

2. **カフェ一覧機能**
   - [ ] 一覧表示コンポーネント
   - [ ] ソート・フィルター機能
   - [ ] 検索機能
   - [ ] ページネーション

3. **カフェ詳細・編集**
   - [ ] 詳細表示コンポーネント
   - [ ] 編集フォーム
   - [ ] 削除機能（確認付き）

4. **データ管理**
   - [ ] エクスポート機能（JSON）
   - [ ] インポート機能

### Phase 4: UX向上とリリース準備
**目標**: 使いやすさの追求とPWA機能の充実

#### タスク
1. **UI/UXブラッシュアップ**
   - [ ] UIコンポーネントのスタイリング
   - [ ] アニメーション追加
   - [ ] ローディング表示
   - [ ] エラーハンドリングUI

2. **PWA機能強化**
   - [ ] オフライン対応の完成
   - [ ] インストール促進UI
   - [ ] アップデート通知
   - [ ] アイコン・スプラッシュ画面

3. **テスト・最適化**
   - [ ] ユニットテスト作成
   - [ ] E2Eテスト
   - [ ] パフォーマンステスト
   - [ ] バンドルサイズ最適化

4. **デプロイ準備**
   - [ ] Vercel設定
   - [ ] 環境変数設定
   - [ ] ビルド設定
   - [ ] デプロイ自動化

## マイルストーン
1. **Phase 1完了**: データの保存・取得が可能
2. **Phase 2完了**: 地図上でカフェ確認可能
3. **Phase 3完了**: カフェの登録・管理が完全動作
4. **Phase 4完了**: PWAとして完成・デプロイ

## リスクと対策
| リスク | 対策 |
|-------|------|
| Google Maps API制限 | 無料枠内での利用、キャッシュ活用 |
| SVG地図のパフォーマンス | 段階的な最適化、必要に応じてCanvas検討 |
| IndexedDB容量制限 | 写真は圧縮、古いデータの整理機能 |
| ブラウザ互換性 | 主要ブラウザでのテスト、Polyfill使用 |

## 成功基準
- [ ] オフラインでカフェ情報の閲覧が可能
- [ ] 3秒以内の初期ロード
- [ ] スムーズな地図操作（60fps）
- [ ] 直感的なUI/UX
- [ ] Vercelでの安定稼働